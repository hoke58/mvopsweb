{% extends 'basec.html' %}
{% block title %}
    查询结果
{% endblock %}
{% block content %}
        <h3>查询结果</h3>
        {% if event %}
            <form method="post" action="{{ url_for('update') }}" class="form-box">
                <!-- 隐藏字段，用于存储订单号和事件ID -->
                <input type="hidden" name="orderid" value="{{ event.f_vc_orderid }}">
                <input type="hidden" name="event_id" value="{{ event.f_eventid }}">

                <!-- 订单号和事件ID显示 -->
                <div class="form-item">
                    <label class="form-item-label">订单号:</label>
                    <div class="form-item-content">
                        <span>{{ event.f_vc_orderid }}</span>
                    </div>
                </div>
                <div class="form-item">
                    <label class="form-item-label">事件ID:</label>
                    <div class="form-item-content">
                        <span>{{ event.f_eventid }}</span>
                    </div>
                </div>
                <div class="form-item">
                    <label class="form-item-label">事件类型:</label>
                    <div class="form-item-content">
                        <span>{{ event.f_typeid }}</span>
                        <span style="color: red"> &nbsp;（0事故 1救援 3养护 10异常事件）</span>
                    </div>
                </div>

                <!-- 状态和事件状态输入 -->
                <div class="form-item">
                    <label class="form-item-label" for="f_state">事件进展状态:</label>
                    <div class="form-item-content">
                        <span style="color: red">（0接报 1接收 2接警 5出发 6到达 7施救 8离场 9解拖 10结案）</span>
                        <input
                          class="form-control"
                          type="text"
                          id="f_state"
                          name="f_state"
                          value="{{ event.f_state }}"
                        />
                    </div>
                </div>
                <div class="form-item">
                    <label class="form-item-label" for="f_eventstate">事件状态:</label>
                    <div class="form-item-content">
                        <span style="color: red">0进行中，1结案</span>
                        <input
                          class="form-control"
                          type="text"
                          id="f_eventstate"
                          name="f_eventstate"
                          value="{{ event.f_eventstate }}"
                        />
                    </div>
                </div>
                <div class="form-item">
                    <label class="form-item-label" for="f_accidentdesc">t_event表:</label>
                    <div class="form-item-content">
                        <textarea
                          class="form-control"
                          type="text"
                          id="f_accidentdesc"
                          name="f_accidentdesc"
{#                          value=""#}
                        >{{ event.f_accidentdesc }}</textarea>
                    </div>
                </div>

                <!-- 报告状态输入 -->
                <div class="form-item">
                    <label class="form-item-label" for="f_vc_early">初报:</label>
                    <div class="form-item-content">
                        <textarea
                            class="form-control"
                            type="text"
                            id="f_vc_early"
                            name="f_vc_early"
{#                            value=""#}
                        >{{ retrofit_info.f_vc_early if retrofit_info else '' }}</textarea>
                  </div>
                </div>
{#                {% if retrofit_info.f_vc_renewal %}#}
                    <div class="form-item">
                        <label class="form-item-label" for="f_vc_renewal">续报:</label>
                        <div class="form-item-content">
                            <textarea
                                class="form-control"
                                type="text"
                                id="f_vc_renewal"
                                name="f_vc_renewal"
    {#                            value=""#}
                            >{{ retrofit_info.f_vc_renewal if retrofit_info else '' }}</textarea>
                      </div>
                    </div>
{#                {% endif %}#}
                <div class="form-item">
                    <label class="form-item-label" for="f_vc_final">终报:</label>
                    <div class="form-item-content">
                        <textarea
                            class="form-control"
                            type="text"
                            id="f_vc_final"
                            name="f_vc_final"
{#                            value=""#}
                        >{{ retrofit_info.f_vc_final if retrofit_info else '' }}</textarea>
                  </div>
                </div>

                <!-- 占道情况输入 -->
                {% if jam_info %}
                    <div class="form-item">
                        <label class="form-item-label" for="f_down_jamnum">下行占道:</label>
                        <div class="form-item-content">
                            <input
                                class="form-control"
                                type="text"
                                id="f_down_jamnum"
                                name="f_down_jamnum"
                                value="{{ jam_info.f_down_jamnum if jam_info else '' }}"
                            />
                      </div>
                    </div>
                    <div class="form-item">
                        <label class="form-item-label" for="f_up_jamnum">上行占道:</label>
                        <div class="form-item-content">
                            <input
                                class="form-control"
                                type="text"
                                id="f_up_jamnum"
                                name="f_up_jamnum"
                                value="{{ jam_info.f_up_jamnum if jam_info else '' }}"
                            />
                        </div>
                    </div>
                {% endif %}

                <!-- spare表中内容 -->
                <!--div class="form-item"-->
                <label class="form-item-label" >spare表内容:</label>
                {% for spare in spare_info %}
                    <div class="form-item">
                        <label class="form-item-label" for="f_vc_renewal_spare_{{ spare.f_vc_id }}" >类型 {{ spare.f_vc_spare }}：</label>
                        <input type="hidden" name="spare_id" value="{{ spare.f_vc_id }}">
                        <textarea
                            class="form-control"
                            type="text"
                            id="f_vc_renewal_spare_{{ spare.f_vc_id }}"
                            name="f_vc_renewal_spare_{{ spare.f_vc_id }}"
                            style="margin-top: 5px"
                        >{{ spare.f_vc_renewal }}</textarea>
                    </div>
                {% endfor %}
                <!--/div-->

{#                <div class="form-item">#}
{#                    <label class="form-item-label" >验证字符：</label>#}
{#                    <div class="form-item-content">#}
{#                        <input#}
{#                            class="form-control"#}
{#                            type="text"#}
{#                            name="verify"#}
{#                        />#}
{#                    </div>#}
{#                </div>#}
                <button type="submit" class="btn btn-primary">保存修改</button>
            </form>
        {% else %}
            <div class="empty-box">没有找到与订单号对应的事件。</div>
        {% endif %}
        <br>
        <a href="/">返回查询</a>

{% endblock %}
